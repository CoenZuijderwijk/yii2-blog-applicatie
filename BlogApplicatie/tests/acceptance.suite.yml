class_name: AcceptanceTester


modules:
  enabled:
    - Yii2:
        configFile: 'config/test.php'
        part: orm # allow to use AR methods
        transaction: false # don't wrap test in transaction
        cleanup: false # don't cleanup the fixtures
        entryScript: index-test.php
env:
  IE:
    modules:
      enabled:
        - WebDriver:
            url: http://localhost:8080/
            port: 4444
            browser: internet explorer
            wait: 2
            restart: true
            pageload_timeout: 30
        - Yii2:
            configFile: 'config/test.php'
            part: orm # allow to use AR methods
            transaction: false # don't wrap test in transaction
            cleanup: false # don't cleanup the fixtures
            entryScript: index-test.php
    extensions:
      enabled:
        - Codeception\Extension\RunProcess:
            0: CD C:\xampp\mysql\bin & mysqldump -u root blogapplicatie > ../../htdocs/Yii/yii2-blog-applicatie/BlogApplicatie/tests/_data/before-test.sql
            1: php -S localhost:8080 -t web
            2: CD tests/bin & selenium-server-standalone-3.141.59.jar
            3: CD tests/bin & IEDriverServer --url-base=/wd/hub/session
            sleep: 5
  chrome:
    modules:
      enabled:
        - WebDriver:
            url: http://localhost:8080/
            port: 9515
            browser: chrome
            wait: 2
            restart: true
            capabilities:
              "goog:chromeOptions": # additional chrome options
        - Db:
            dsn: 'mysql:host=localhost;port=3306;dbname=BlogApplicatie;unix_socket=/Applications/MAMP/tmp/mysql/mysql.sock'
            user: 'root'
            password:
            dump: tests/_data/dump.sql
            cleanup: true # reload dump between tests
            populate: true # load dump before all tests
            populator: 'CD C:\xampp\mysql\bin & mysqldump -u root blogapplicatie < tests/_data/dump.sql'
    extensions:
      enabled:
        - Codeception\Extension\RunProcess:
            0: php -S localhost:8080 -t web
            1: CD tests/bin & chromedriver --url-base=/wd/hub
            sleep: 2
  browserstack-chrome:
    modules:
      enabled:
        - Db:
            dsn: 'mysql:host=localhost;port=3306;dbname=BlogApplicatie;unix_socket=/Applications/MAMP/tmp/mysql/mysql.sock'
            user: 'root'
            password:
            dump: tests/_data/dump.sql
            cleanup: true # reload dump between tests
            populate: true # load dump before all tests
            populator: 'CD C:\xampp\mysql\bin & mysqldump -u root blogapplicatie < tests/_data/dump.sql'
        - WebDriver:
            host: 'hub-cloud.browserstack.com'
            port: 80
            url: 'http://localhost:8080/'
            capabilities:
              'browserstack.user': 'pieterpost2'
              'browserstack.key': 'zjxNfWWz8Z9rmQAZoCxE'
              'browserstack.local': true
              'browserstack.force': true
            'os': 'Windows'
            'os_version': '10'
            'browser': 'Chrome'
            'browser_version': '80.0'
            'resolution': '1024x768'
            'name': "Coen Blog-codeption chrome"
    extensions:
      enabled:
        - Codeception\Extension\RunProcess:
            0: CD tests/bin & BrowserStackLocal.exe --key zjxNfWWz8Z9rmQAZoCxE
            1: php -S localhost:8080 -t web
            2: CD tests/bin & chromedriver --url-base=/wd/hub
            sleep: 5
  browserstack-IE:
    modules:
      enabled:
        - Db:
            dsn: 'mysql:host=localhost;port=3306;dbname=BlogApplicatie;unix_socket=/Applications/MAMP/tmp/mysql/mysql.sock'
            user: 'root'
            password:
            dump: tests/_data/dump.sql
            cleanup: true # reload dump between tests
            populate: true # load dump before all tests
            populator: 'CD C:\xampp\mysql\bin & mysqldump -u root blogapplicatie < tests/_data/dump.sql'
        - WebDriver:
            host: 'hub-cloud.browserstack.com'
            port: 80
            url: 'http://localhost:8080/'
            browser: chrome
            capabilities:
              'browserstack.user': 'pieterpost2'
              'browserstack.key': 'zjxNfWWz8Z9rmQAZoCxE'
              'browserstack.local': true
              'browserstack.force': true
              'os': 'Windows'
              'os_version': '10'
              'browser': 'IE'
              'browser_version': '11.0'
              'resolution': '1024x768'
              'name': "Coen Blog-codeption chrome"
    extensions:
      enabled:
        - Codeception\Extension\RunProcess:
            0: CD tests/bin & BrowserStackLocal.exe --key zjxNfWWz8Z9rmQAZoCxE
            1: php -S localhost:8080 -t web
            sleep: 5


